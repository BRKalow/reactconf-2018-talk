import { Appear, Image } from 'mdx-deck';
import { Split } from 'mdx-deck/layouts';
import { CodeSurfer } from 'mdx-deck-code-surfer';
import codeSurferTheme from './src/monokai-theme';
import QuoteLayout from './src/quote-layout'
import Layout from './src/layout';
import LayoutNoFooter from './src/layout-no-footer';
import LayoutCenter from './src/layout-center';
import UnitOfWork from './src/unit-of-work';
import Diagram from './src/diagram';
import TargetLogo from './src/target-logo';
import { BlockHeader, BorderedText, H2 } from './src/headers';
import { ImpressionsManager, IncrementImpressions, ImpressionsCounter } from './src/impression-tracker.js';

export { default as theme } from './src/theme'

export default LayoutNoFooter

## <BorderedText>Components</BorderedText> as
<BlockHeader background="#50E3C2" invert>Units of Work</BlockHeader>

---

export default LayoutNoFooter

# Hi, I'm Bryce! ðŸ‘‹

Engineer at <TargetLogo /> Target

@brkalow

```notes
I work on target.com's React front-end

Let's talk about components...
```

---

export default QuoteLayout

> Components let you split the UI into independent, reusable pieces, and think about each piece in isolation.

â€” [reactjs.org](https://reactjs.org/docs/components-and-props.html)


```notes
In their purest form, components represent individual pieces of our UIs
```

---

export default Layout

## Components also tend to have a lot of other responsibilities...

<ul>
  <Appear>
    <li>Fetch data</li>
    <li>Add event listeners</li>
    <li>Handle navigation</li>
    <li>Manage state</li>
    <li>Transform data</li>
    <li>Set timers</li>
    <li>Control focus</li>
    <li>Track user interactions</li>
    <li>Inject scripts</li>
    <li>Handle scrolling</li>
    <div><span style={{ transform: 'rotate(45deg) perspective(0)', display: 'block', position: 'absolute', top: '50%', right: '30%', fontSize: '5em' }}>ðŸ˜…</span></div>
  </Appear>
</ul>

```notes
As our applications grow, our components also evolve to encompass a lot of other functionality

It can get pretty overwhelming!
```

---

export default Layout

## The React lifecycle controls the execution flow of our applications

```notes
We use the React lifecycle to control the execution flow of our applications in between renders

This is crucial for large React applications, as most things are dictated by and revolve around
the React component tree. Navigation, app state, and configuration are often all orchestrated by
some piece of React.
```

---

export default Layout

## How can we do this without constructing brittle, hard-to-maintain logic? ðŸ¤”

```notes
How can we orchestrate functionality within the React lifecycle without constructing brittle, hard-to-maintain logic?

* Similar logic in DidMount and DidUpdate
* Think about comparing props in DidUpdate to get that condition exactly right
```

---

export default LayoutCenter

# With components!

![](assets/fallon-nice.gif)

---

export default Layout

## Components don't have to _render_ anything
but they can still _do_ something


```notes
Returning null from render is totally valid, you might even be using this pattern without realizing it.
```

---

export default Layout

# Componentize your lifecycle logic

```notes
It's a simple pattern, but I think it is also really powerful
```

---

export default LayoutCenter

<Diagram />

```notes
We can take logic spread across mulitple lifecycle methods and put them into components,
then use these components to compose logic, just like we do for our UI
```

---

export default Layout

```jsx
// use keys to trigger execution
<RetainScrollPosition key={url} />
```

```jsx
// declare application flow
if (!loggedIn) return <Redirect to={loginPage} />;
```

```notes
We can do cool things like...

* use keys to trigger execution
* define how our application should function in a declarative way
```

---

export default LayoutNoFooter

<CodeSurfer
  title="<ClientVersionCheck>"
  code={require("!raw-loader!./src/client-version-check.js")}
  theme={codeSurferTheme}
  lang="javascript"
  showNumbers={false}
  dark={false}
  steps={[
    { lines: [7,8,9] },
    { lines: [23,24] },
    { lines: [28] }
  ]}
/>

---

export default Layout

## react-router \<Redirect\>

```jsx
import { Route, Redirect } from 'react-router'

<Route exact path="/" render={() => (
  loggedIn ? (
    <Redirect to="/dashboard"/>
  ) : (
    <PublicHomePage/>
  )
)}/>
```

```notes
`react-router` uses this pattern quite a bit, they have a renderless component in their source called `<Lifecycle>`.
From: https://reacttraining.com/react-router/web/api/Redirect
```

---

export default Layout

# Embrace using components beyond presentation
Think in React

```notes
The React docs have a great page on "thinking in React", and I believe that this pattern is
just a continuation of that idea.
```

---

export default Layout

# <Thanks! />

<https://components-units-of-work.now.sh>

```notes
If you're using this pattern, or just want to talk about anything React, come find me!
Thank you, enjoy the rest of conference.
```
